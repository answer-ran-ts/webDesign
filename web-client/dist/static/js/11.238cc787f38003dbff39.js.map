{"version":3,"sources":["webpack:///src/pages/Me/Children/EditPhone.vue","webpack:///./src/pages/Me/Children/EditPhone.vue?866e","webpack:///./src/pages/Me/Children/EditPhone.vue"],"names":["EditPhone","data","phone","countDown","code","computed","extends_default","Object","vuex_esm","phoneRight","test","this","methods","getVerifyCode","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","result","wrap","_context","prev","next","intervalId","setInterval","clearInterval","api","sent","console","log","err_code","element_ui_common","type","message","showClose","success_code","stop","goTo","path","$router","replace","submitEdit","_this2","_callee2","_context2","$message","abrupt","userInfo","id","$store","dispatch","user_id","error","Children_EditPhone","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","directives","name","rawName","value","expression","maxlength","placeholder","domProps","on","input","$event","target","composing","_v","disabled","_s","class","phone_right","click","preventDefault","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"+MAmCAA,GACAC,KADA,WAEA,OACAC,MAAA,GACAC,UAAA,EACAC,KAAA,KAGAC,SAAAC,OACAC,OAAAC,EAAA,EAAAD,EAAA,cAEAE,WAHA,WAIA,iCAAAC,KAAAC,KAAAT,UAGAU,SAEAC,cAFA,WAEA,IAAAC,EAAAH,KAAA,OAAAI,IAAAC,EAAAC,EAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAA,OAAAJ,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAEAV,EAAAL,aACAK,EAAAX,UAAA,GACAW,EAAAW,WAAAC,YAAA,WACAZ,EAAAX,YAEA,IAAAW,EAAAX,WACAwB,cAAAb,EAAAW,aAEA,MAVAH,EAAAE,KAAA,EAcAjB,OAAAqB,EAAA,EAAArB,CAAAO,EAAAZ,OAdA,OAcAkB,EAdAE,EAAAO,KAeAC,QAAAC,IAAAX,GAGA,IAAAA,EAAAY,UAEAzB,OAAA0B,EAAA,WAAA1B,EACA2B,KAAA,OACAC,QAAAf,EAAAe,QACAC,WAAA,IAIAT,cAAAb,EAAAW,YACAX,EAAAX,UAAA,GACA,MAAAiB,EAAAiB,cACA9B,OAAA0B,EAAA,WAAA1B,EACA2B,KAAA,OACAC,QAAA,QAAAf,EAAAe,QAAA,yBACAC,WAAA,IAjCA,wBAAAd,EAAAgB,SAAAnB,EAAAL,KAAAC,IAqCAwB,KAvCA,SAuCAC,GACA7B,KAAA8B,QAAAC,QAAAF,IAEAG,WA1CA,WA0CA,IAAAC,EAAAjC,KAAA,OAAAI,IAAAC,EAAAC,EAAAC,KAAA,SAAA2B,IAAA,IAAAzB,EAAA,OAAAJ,EAAAC,EAAAI,KAAA,SAAAyB,GAAA,cAAAA,EAAAvB,KAAAuB,EAAAtB,MAAA,UACAoB,EAAA1C,MADA,CAAA4C,EAAAtB,KAAA,eAEAoB,EAAAG,SAAA,YAFAD,EAAAE,OAAA,oBAKAJ,EAAAxC,KALA,CAAA0C,EAAAtB,KAAA,eAMAoB,EAAAG,SAAA,YANAD,EAAAE,OAAA,wBAAAF,EAAAtB,KAAA,EASAjB,OAAAqB,EAAA,EAAArB,CAAAqC,EAAAK,SAAAC,GAAAN,EAAA1C,MAAA0C,EAAAxC,MATA,OAUA,OADAgB,EATA0B,EAAAjB,MAUAQ,cACAO,EAAAG,UACAZ,QAAAf,EAAAe,QACAD,KAAA,YAEAU,EAAAO,OAAAC,SAAA,eAAAC,QAAAT,EAAAK,SAAAC,KACAN,EAAAH,QAAAC,QAAA,gBAEAE,EAAAG,SAAAO,MAAAlC,EAAAe,SAlBA,yBAAAW,EAAAR,SAAAO,EAAAD,KAAA7B,MCzFewC,GADEC,OAFjB,WAA0B,IAAAC,EAAA9C,KAAa+C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,OAAOZ,GAAA,gBAAmBU,EAAA,WAAgBG,YAAA,iBAA2BH,EAAA,SAAcI,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAV,EAAA,MAAAW,WAAA,UAAoEN,OAAS5B,KAAA,MAAAmC,UAAA,KAAAC,YAAA,OAAkDC,UAAWJ,MAAAV,EAAA,OAAoBe,IAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,YAAsCnB,EAAAvD,MAAAwE,EAAAC,OAAAR,WAAgCV,EAAAoB,GAAA,KAAApB,EAAAtD,UAAiMyD,EAAA,UAA+CG,YAAA,mBAAAD,OAAsCgB,SAAA,cAAuBrB,EAAAoB,GAAA,iBAAApB,EAAAsB,GAAAtB,EAAAtD,WAAA,cAA7SyD,EAAA,UAA4CG,YAAA,mBAAAiB,OAAsCC,YAAAxB,EAAAhD,YAA4B+D,IAAKU,MAAA,SAAAR,GAAiD,OAAxBA,EAAAS,iBAAwB1B,EAAA5C,oBAA6B4C,EAAAoB,GAAA,2BAA4GpB,EAAAoB,GAAA,KAAAjB,EAAA,WAA0FG,YAAA,sBAAgCH,EAAA,SAAcI,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAV,EAAA,KAAAW,WAAA,SAAkEN,OAAS5B,KAAA,MAAAmC,UAAA,IAAAC,YAAA,OAAiDC,UAAWJ,MAAAV,EAAA,MAAmBe,IAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,YAAsCnB,EAAArD,KAAAsE,EAAAC,OAAAR,aAA+BV,EAAAoB,GAAA,KAAAjB,EAAA,OAA0BG,YAAA,gBAA0BH,EAAA,aAAkBE,OAAO5B,KAAA,WAAiBsC,IAAKU,MAAA,SAAAR,GAAyB,OAAAjB,EAAAlB,KAAA,mBAAiCkB,EAAAoB,GAAA,QAAApB,EAAAoB,GAAA,KAAAjB,EAAA,aAA6CE,OAAO5B,KAAA,UAAgBsC,IAAKU,MAAAzB,EAAAd,cAAwBc,EAAAoB,GAAA,eAEx3CO,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEvF,EACAuD,GATF,EAVA,SAAAiC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/11.238cc787f38003dbff39.js","sourcesContent":["<template>\r\n  <div id=\"edit-phone\">\r\n    <section class=\"edit-message\">\r\n      <input type=\"tel\" maxlength=\"11\" placeholder=\"手机号\" v-model=\"phone\">\r\n      <button\r\n        v-if=\"!countDown\"\r\n        class=\"get-verification\"\r\n        :class=\"{phone_right: phoneRight}\"\r\n        @click.prevent=\"getVerifyCode()\"\r\n      >\r\n        获取验证码\r\n      </button>\r\n      <button\r\n        v-else\r\n        disabled=\"disabled\"\r\n        class=\"get-verification\">\r\n          已发送({{countDown}}s)\r\n      </button>\r\n    </section>\r\n    <section class=\"edit-verification\">\r\n      <input type=\"tel\" maxlength=\"8\" placeholder=\"验证码\" v-model=\"code\">\r\n    </section>\r\n    <div class=\"btn-section\">\r\n       <el-button type=\"primary\" @click=\"goTo('/me/profile')\">返回</el-button>\r\n       <el-button type=\"danger\" @click=\"submitEdit\">编辑</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {mapState} from 'vuex';\r\n  import {mapActions} from 'vuex'\r\n  import { MessageBox } from 'element-ui';\r\n  import {getPhoneCode, changeUserPhone} from './../../../api/index';\r\n\r\n  export default {\r\n    data(){\r\n      return{\r\n        phone: '',\r\n        countDown: 0, // 倒计时\r\n        code: '', // 验证码\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState([\"userInfo\"]),\r\n      // 验证手机号是否合理\r\n      phoneRight() {\r\n        return /^[1][3,4,5,7,8][0-9]{9}$/.test(this.phone)\r\n      }\r\n    },\r\n    methods: {\r\n      // 获取短信验证码\r\n      async getVerifyCode() {\r\n        // 1 开启倒计时\r\n        if (this.phoneRight) {\r\n          this.countDown = 60;\r\n          this.intervalId = setInterval(() => {\r\n            this.countDown--;\r\n            // 判断\r\n            if (this.countDown === 0) {\r\n              clearInterval(this.intervalId);\r\n            }\r\n          }, 1000);\r\n        }\r\n\r\n        // 2 获取短信验证码\r\n        let result = await getPhoneCode(this.phone);\r\n        console.log(result);\r\n\r\n        // 3 获取验证码失败\r\n        if (result.err_code === 0) {\r\n          // 提示信息\r\n\t\t      MessageBox({\r\n            type: 'info',\r\n            message: result.message,\r\n\t\t\t      showClose: true,\r\n          });\r\n\r\n          // 其他处理\r\n          clearInterval(this.intervalId);\r\n          this.countDown = 0;\r\n        }else if(result.success_code === 200){\r\n\t\t\t    MessageBox({\r\n              type: 'info',\r\n              message: `验证码为:${result.message}, 短信功能暂未开通,十分抱歉对您产生的不便`,\r\n\t\t\t        showClose: true,\r\n          });\r\n\t\t    }\r\n      },\r\n      goTo(path){\r\n        this.$router.replace(path);\r\n      },\r\n      async submitEdit(){\r\n        if(!this.phone){\r\n          this.$message('手机号不得为空！');\r\n          return;\r\n        }\r\n        if(!this.code){\r\n          this.$message('验证码不得为空！');\r\n          return;\r\n        }\r\n        let result = await changeUserPhone(this.userInfo.id, this.phone, this.code);\r\n        if(result.success_code === 200){\r\n          this.$message({\r\n            message: result.message,\r\n            type: 'success'\r\n          });\r\n          this.$store.dispatch('getUserInfo',{user_id: this.userInfo.id});\r\n          this.$router.replace('/me/profile');\r\n        }else{\r\n          this.$message.error(result.message);\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  #edit-phone{\r\n    padding-top: 10%;\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n  #edit-phone input{\r\n    width: 100%;\r\n    height: 100%;\r\n    padding-left: 8px;\r\n    box-sizing: border-box;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n    outline: 0;\r\n    font: 400 14px Arial;\r\n  }\r\n  #edit-phone input:focus{\r\n    border: 1px solid #409EFF;\r\n  }\r\n  .edit-message{\r\n    position: relative;\r\n    width: 300px;\r\n    height: 40px;\r\n    font-size: 14px;\r\n  }\r\n  .get-verification{\r\n    position: absolute;\r\n    top: 50%;\r\n    right: 10px;\r\n    transform: translateY(-50%);\r\n    border: none;\r\n    color: #ccc;\r\n    font-size: 14px;\r\n    background: transparent;\r\n  }\r\n  .phone_right{\r\n    color: rgb(64, 131, 255);\r\n  }\r\n  .edit-verification{\r\n    position: relative;\r\n    margin-top: 24px;\r\n    width: 300px;\r\n    height: 40px;\r\n    font-size: 14px;\r\n  }\r\n  .btn-section{\r\n    margin: 50px auto;\r\n    width: 25%;\r\n\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n  .btn-section .el-button{\r\n    width: 100px;\r\n    outline: none;\r\n  }\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Me/Children/EditPhone.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"edit-phone\"}},[_c('section',{staticClass:\"edit-message\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.phone),expression:\"phone\"}],attrs:{\"type\":\"tel\",\"maxlength\":\"11\",\"placeholder\":\"手机号\"},domProps:{\"value\":(_vm.phone)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.phone=$event.target.value}}}),_vm._v(\" \"),(!_vm.countDown)?_c('button',{staticClass:\"get-verification\",class:{phone_right: _vm.phoneRight},on:{\"click\":function($event){$event.preventDefault();return _vm.getVerifyCode()}}},[_vm._v(\"\\n      获取验证码\\n    \")]):_c('button',{staticClass:\"get-verification\",attrs:{\"disabled\":\"disabled\"}},[_vm._v(\"\\n        已发送(\"+_vm._s(_vm.countDown)+\"s)\\n    \")])]),_vm._v(\" \"),_c('section',{staticClass:\"edit-verification\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.code),expression:\"code\"}],attrs:{\"type\":\"tel\",\"maxlength\":\"8\",\"placeholder\":\"验证码\"},domProps:{\"value\":(_vm.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.code=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"btn-section\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.goTo('/me/profile')}}},[_vm._v(\"返回\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.submitEdit}},[_vm._v(\"编辑\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-62ee2430\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Me/Children/EditPhone.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-62ee2430\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EditPhone.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditPhone.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditPhone.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-62ee2430\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./EditPhone.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-62ee2430\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Me/Children/EditPhone.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}